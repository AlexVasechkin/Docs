Платный компонент предназначен для добавления меток к ресурсам.
[Купить ][1]

Демо-версия [http://usermarker.bustep.ru/demo.html][1]

Видео с демонстрацией [https://www.youtube.com/watch?v=0nksuTp1spQ][1]

### Основные особенности:

* Можно назначать метки не только ресурсам но и другим любым объектам. Для этого нужно задавать свой classKey для кнопки
* Так же учитывается контекст откуда был добавлен ресурс (можно отключить)
* Возможность вывода отмеченых ресурсов пользователя через сниппет ***[[!userMarker.Ids? &label=`Проверен`]]*** с указанием нужной метки(вернет список id ресурсов)
* Управление созданными метками через личный кабинет
* Управление правами приложения. Возможность назначить права управления метками только определенным группа и контектам. Шаблон политики доступа **userMarker**


## Быстрый старт


#### Инициализация скриптов. 
Подключаем сниппет на страницу для инициализации скриптов js и css (вставить в верхнюю часть сайта)

```
[[!userMarker.Initialize]]
```


#### Список меток. 
Вставляем сниппет с нашими метками и кнопкой добавить метку

```
[[!userMarker.Label]]
```


#### Чанк ресурса. 
вставить  ```[[!userMarker.Record? &resource_id=`[[+id]]`]]``` 

```
<h3>[[+pagetitle]]</h3>
[[!userMarker.Record? &resource_id=`[[+id]]`]]
```

#### Вывод списка ресурсов. 

В resources вставляем сниппет userMarker.Ids.
```
[[!pdoResources?
    &resources=`[[!userMarker.Ids]]`
    &parents=`3`
    &tpl=`myTPL`
]]
```

#### Управление метками
Вставить на страницу для авторизованного пользователя.
```
[[!userMarker?
     &tpl=`tpl.userMarker.manager.row`
     &tplOuter=`tpl.userMarker.manager.outer`
]]
```


### Параметры настроек

Параметр	|	По умолчанию				|	Название |	Описание
------------|-------------------------------|------------|-----------------------------------------------------
**meta_context**		| 	Да     			| Регистрировать мета тег context | "Да" - то в head добавится мета тег <meta name="page-context" content="web">
**frontend_css**		| 		[[+cssUrl]]web/default.css     			| Стили фронтенда | Путь к файлу со стилями. Если вы хотите использовать собственные стилями - укажите путь к ним здесь, или очистите параметр и загрузите их вручную через шаблон сайта.
**frontend_js**		| [[+jsUrl]]web/default.js     			| Скрипты фронтенда | Путь к файлу со скриптами. Если вы хотите использовать собственные скрипты - укажите путь к ним здесь, или очистите параметр и загрузите их вручную через шаблон сайта.
**frontend_jgrowl_css**		| 	[[+cssUrl]]web/lib/jquery.jgrowl.min.css | Стили фронтенда jgrowl|
**frontend_jgrowl_js**		| 	[[+jsUrl]]web/lib/jquery.jgrowl.min.js | Скрипты фронтенда jgrowl|
**regular_expression**		| 	/[^a-Zа-Я0-9-.]+/is| Регулярное выражение для проверки наименования метки|  дает вводить буквы,циры, дифисы и точки
**framework_bootstrap_css** | [[+framework]]bootstrap3/css/default.min.css | Стили фронтенда bootstrap | Оставить пустым если не хотите подключать дополнительные стили.
**framework_bootstrap_js**  | [[+framework]]bootstrap3/js/default.js | Скрипты фронтенда bootstrap | Оставить пустым если не хотите подключать дополнительные скрипты.
**resource_markers**           | пусто | id страницы с результатми выборки отмеченых ресурсов| жите id ресурса куда будет перенаправть пользователя после выбора метки. По умолчанию на текущую страницу


### Параметры userMarker.Initialize

Параметр	|	По умолчанию				|	Описание
------------|-------------------------------|-----------------------------------------------------
**selector**		| userMarker     			| Селектор кнопки добавить метку



### Параметры userMarker.Label

Параметр	|	По умолчанию				|	Описание
------------|-------------------------------|-----------------------------------------------------
**defaultLabel**		| all     			| Метка для выборки ресурсов по умолчанию
**resource_markers**		| текуща страница    			| id страницы с результатами выборки отмеченных ресурсо
**tpl**		| 	tpl.userMarker.row    			| Чанк для вывода записи
**tplOuter**		| 	tpl.userMarker.outer    | Чанк для вывода обертки
**user**		| 	true    | Показывать метки только те что создал пользователь.



### Параметры userMarker.Ids

Параметр	|	По умолчанию				|	Описание
------------|-------------------------------|-----------------------------------------------------
**classKey**		| 	modResource     			| classKey ресурса выборки ресурсов
**label**		| 	пусто     			| Название метки для выборки ресурсов пользователя. По умолчанию all, вернет все ресурсы авторизованного пользователя
**user**		| 	true    | Показывать метки только те что создал пользователь.
**user_id**		| 	$modx->user->id    | Индитификатор пользователя для вывода меток



### Параметры userMarker.Record

Параметр	|	По умолчанию				|	Описание
------------|-------------------------------|-----------------------------------------------------
**resource_id**		| 	пусто     			| id ресурса для добавления метки
**classKey**		| 	modResource     	| classKey ресурса для добавления метки
**context_key**		| 	web     			| Контекст ресурса для добавления метки
**selector**		| 	userMarker     		| Селектор кнопки добавить метку
**tpl**		        | 	tpl.userMarker.row    			| Чанк для вывода записи


### Переназначения js для модельного окна

Добавлены события для js modal
```
    // Событие для открытия модельного окна
    userMarker.Modal.show = function() {
        
        // Сюда можно прописать свой скрипт запуска модельного окна
        $(userMarker.options.modal).modal('show')
        
        // После закрытия автоматически стерам данные
        $(userMarker.options.modal).on('hidden.bs.modal', function (e) {
            userMarker.removeModal()
        })
                
    };
    
    // Событие для закрытия модельного окна
    userMarker.Modal.hide = function() {
        if ($(userMarker.options.modal).length) {
        
            // Сюда можно прописать свой скрипт закрытия модельного окна
           $(userMarker.options.modal).modal('hide')
        }
    };

```

[1]: https://modstore.pro/packages/ecommerce/usermarker