Сниппет вывода оформленного заказа `pas.get.order`

Используется на странице оформления заказа.

## Параметры

Параметр            | По умолчанию  | Описание
--------------------|---------------|---------------------------------------------
**tpl**             | pas.get.order | Чанк оформления
**includeTVs**      |               | Список ТВ параметров для выборки, через запятую. Например: "action,time" дадут плейсхолдеры [[+action]] и [[+time]].
**includeThumbs**   |               | Список размеров превьюшек для выборки, через запятую. Например: "120x90,360x240" дадут плейслолдеры [[+120x90]] и [[+360x240]]. Картинки должны быть заранее сгенерированы в галерее товара.

*Можно использовать и другие [общие параметры pdoTools][0104]*

## Оформление
Сниппет рассчитывает на работу с [чанком Fenom][010103] и передаёт в него 7 переменных:

- `order` - массив с данными заказа из объекта `msOrder`
- `products` - массив заказанных товаров со всеми их свойствами
- `user` - массив данных из объектов `modUser` и `modUserProfile` со всеми свойствами покупателя
- `address` - массив данных из объекта `msAddress` со указанными данными для доставки
- `delivery` - массив со свойствами выбранной доставки из объекта `msDelivery`
- `payment` - массив со свойствами выбранной оплаты из объекта `msPayment`
- `total` - массив с итоговыми данными заказа:
    - `cost` - общая стоимость заказа
    - `cart_cost` - отдельная стоимость заказанных товаров
    - `delivery_cost` - отдельная стоимость доставки
    - `cart_count` - количество заказанных товаров

*Так же могут присутствовать и данные, переданные при вызове сниппета.
Например, в чанке оформления новых писем может быть переменная `payment_link`*

### Плейсхолдеры
Вы можете увидеть все доступные плейсхолдеры заказа просто указав пустой чанк:
```
<pre>
{'!pas.get.order'|snippet:[
'tpl'=>''
]}
</pre>
```

## Создание заказа
Данный сниппет рекомендуется вызывать в связке с другими на странице оформления заказа:
```
{'!pas.order'|snippet} <!-- Форма оформления заказа, скрывается после его создания -->
{'!pas.get.order'|snippet} <!-- Вывод информации о заказе, показывается после его создания -->
```

## Оформление писем
Для оформления почтовых уведомлений покупателям используется сниппет [msGetOrder][01020205], если вы включили их отправку в [настройках статусов][01020104].

По умолчанию все письма расширяют один базовый почтовый шаблон `tpl.msEmail` и меняют заданные в нём блоки:
- `logo` - логотип магазина со ссылкой на главную страницу
- `title` - заголовок письма
- `products` - таблица заказанные товаров
- `footer` - ссылка на сайте в подвале письма

Идентифицировать заказы контента можно по полю `context` заказа, и если нужно оформить данные заказы по своему.
Например, заменим переменную `products` из сниппета msGetOrder на `products` из сниппета pas.get.order
```
{if $order.context == 'pas'}
{var $tmp = '!pas.get.order'|snippet:[
'msorder' => $order.id,
'return'=>'json'
]|json_decode}
{set $products = $tmp.products}
{/if}
```
Как видите, мы запустили на обработку сниппет `pas.get.order` и заменили значение переменной  `products`.

Подробнее о расширении шаблонов вы можете прочитать в [документации Fenom][001].

[0104]: /ru/01_Компоненты/01_pdoTools/04_Общие_параметры.md
[0101]: /ru/01_Компоненты/01_pdoTools/
[010103]: /ru/01_Компоненты/01_pdoTools/03_Парсер.md
[010101]: /ru/01_Компоненты/01_pdoTools/01_Сниппеты/01_pdoResources.md
[01020205]: /ru/01_Компоненты/02_miniShop2/02_Сниппеты/05_msGetOrder.md
[01020104]: /ru/01_Компоненты/02_miniShop2/01_Интерфейс/04_Настройки.md
[001]: https://github.com/fenom-template/fenom/blob/master/docs/ru/tags/extends.md